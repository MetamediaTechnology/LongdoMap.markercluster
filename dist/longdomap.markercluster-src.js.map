{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/LLBBox.js","webpack:///./src/MarkerCluster.js","webpack:///./src/MarkerClusterGroup.js","webpack:///./src/index.js"],"names":["longdo","window","LLBBox","locations","arguments","length","Array","_projection","Projections","EPSG3857","locationList","_bounds","Utils","locationBound","minLon","minLat","maxLon","maxLat","location","_locationList","push","filter","e","Error","MarkerCluster","options","group","zoom","child1","child2","_group","_zoom","_markers","_childClusters","childCount","_iconNeedsUpdate","_boundsNeedUpdate","_addChild","storageArray","len","getAllChildMarkers","_childCount","getBounds","new1","isNotificationFromChild","_setClusterCenter","__parent","child","_cLatLon","_latlon","bounds","Infinity","maxlon","markers","childClusters","latSum","lonSum","totalCount","childLatLon","_resetBounds","lat","lon","_recalculateBounds","_wLatLon","startPos","_backupLatlon","setLocation","Marker","MarkerClusterGroup","Layer"],"mappings":"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","file":"longdomap.markercluster-src.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","const longdo = window.longdo;\r\nexport class LLBBox{\r\n\r\n    constructor(){\r\n        let locations = arguments.length === 0 ? [{'lat':0,'lon':0}] :\r\n                        arguments.length === 1 ? \r\n                            (arguments[0] instanceof Array ? arguments[0] : [arguments[0]]) :\r\n                        arguments[0] instanceof Array ? arguments[0] : [arguments[0]];\r\n        this._projection = arguments.length <= 1 ? longdo.Projections.EPSG3857 : arguments[1];\r\n        this.locationList = locations instanceof Array ? locations : [locations];\r\n        this._bounds = longdo.Utils.locationBound(this.locationList);\r\n    }\r\n\r\n    getBounds(){\r\n        return {'minLon':this._bounds.minLon,\r\n                'minLat':this._bounds.minLat,\r\n                'maxLon':this._bounds.maxLon,\r\n                'maxLat':this._bounds.maxLat};\r\n    }\r\n\r\n    add(location){\r\n        this._locationList.push(location);\r\n        this._bounds = longdo.Utils.locationBound(this._locationList);\r\n    }\r\n    remove(location){\r\n        this._locationList = this._locationList.filter((e) => e !== location);\r\n    }\r\n}","if(typeof window.longdo === 'undefined'){\r\n    throw new Error('longdo API must be loaded before the longdomap heatmap plugin');\r\n}\r\nconst longdo = window.longdo;\r\nimport {LLBBox} from \"./LLBBox.js\";\r\nexport class MarkerCluster extends longdo.Marker{\r\n\r\n    constructor(location, options){\r\n        super(location,options);\r\n    }\r\n\r\n    initialize(group, zoom,child1,child2) {\r\n        this._group = group;\r\n        this._zoom = zoom;\r\n        this._markers = [];\r\n        this._childClusters = [];\r\n        this.childCount = 0;\r\n        this._iconNeedsUpdate = true;\r\n        this._boundsNeedUpdate = true;\r\n\r\n        this._bounds = new LLBBox();\r\n\r\n        if(child1){\r\n            this._addChild(child1);\r\n        }\r\n        if(child2){\r\n            this._addChild(child2);\r\n        }\r\n    }\r\n\r\n    getAllChildMarkers(storageArray){\r\n        storageArray = storageArray || [];\r\n        let len = this._childClusters.length;\r\n        while(len--){\r\n            this._childClusters[len].getAllChildMarkers(storageArray);\r\n        }\r\n        len = this._markers.length;\r\n        while(len--){\r\n            storageArray.push(this._markers[len]);\r\n        }\r\n        return storageArray;\r\n    }\r\n\r\n    getChildCount(){\r\n        return this._childCount;\r\n    }\r\n\r\n    zoomToBounds(){\r\n        //TODO\r\n    }\r\n\r\n    getBounds(){\r\n        return this._bounds.getBounds();\r\n    }\r\n    _updateIcon(){\r\n        //TODO\r\n    }\r\n\r\n    createIcon(){\r\n        //TODO\r\n    }\r\n    createShadow(){\r\n        //TODO\r\n    }\r\n\r\n    _addChild(new1, isNotificationFromChild){\r\n        this._iconNeedsUpdate = true;\r\n        this._boundsNeedUpdate = true;\r\n        this._setClusterCenter(new1);\r\n\r\n        if(new1 instanceof MarkerCluster){\r\n            if(!isNotificationFromChild){\r\n                this._childClusters.push(new1);\r\n                new1.__parent = this;\r\n            }\r\n            this._childCount += new1._childCount;\r\n        }else{\r\n            if(!isNotificationFromChild){\r\n                this._markers.push(new1);\r\n            }\r\n            this._childCount++;\r\n        }\r\n        if(this.__parent){\r\n            this.__parent._addChild(new1, true);\r\n        }\r\n\r\n    }\r\n\r\n    _setClusterCenter(child){\r\n        if(!this._cLatLon){\r\n            this._cLatLon = child._cLatLon || child._latlon;\r\n        }\r\n    }\r\n\r\n    _resetBounds(){\r\n        const bounds = this._bounds;\r\n        bounds.minLat = -Infinity;\r\n        bounds.minLon = -Infinity;\r\n        bounds.maxlon = Infinity;\r\n        bounds.maxLat = Infinity;\r\n    }\r\n\r\n    _recalculateBounds(){\r\n        let markers = this._markers,\r\n            childClusters = this._childClusters,\r\n            latSum = 0,\r\n            lonSum = 0,\r\n            totalCount = this._childCount,\r\n            len,child,childLatLon,childCount;\r\n        \r\n        if(totalCount === 0){\r\n            return;\r\n        }\r\n        this._resetBounds();\r\n        len = markers.length;\r\n        while(len--){\r\n            childLatLon = markers[len]._latlon;\r\n\r\n            //TODO\r\n            latSum += childLatLon.lat;\r\n            lonSum += childLatLon.lon;\r\n        }\r\n\r\n        len = childClusters.length;\r\n        while(len--){\r\n            child = childClusters[len];\r\n            if(child._boundsNeedUpdate){\r\n                child._recalculateBounds();\r\n            }\r\n            //TODO\r\n            childLatLon = child._wLatLon;\r\n            childCount = child._childCount;\r\n\r\n            latSum += childLatLon.lat * childCount;\r\n            lonSum += childLatLon.lon * childCount;\r\n        }\r\n        this._latlon = this._wLatLon = {\"lat\": latSum/totalCount,\"lon\": lonSum / totalCount};\r\n        this._boundsNeedUpdate = false;\r\n    }\r\n\r\n    _addToMap(startPos){\r\n        if(startPos){\r\n            this._backupLatlon = this._latlon;\r\n            this.setLocation(this._latlon);\r\n        }\r\n        //TODO\r\n    }\r\n\r\n}\r\n","const longdo = window.longdo;\r\nexport class MarkerClusterGroup extends longdo.Layer {\r\n\r\n    constructor(){\r\n        \r\n    }\r\n\r\n    initialize(){\r\n\r\n    }\r\n\r\n    add(){\r\n\r\n    }\r\n\r\n    remove(){\r\n\r\n    }\r\n    \r\n    addMarkers(){\r\n\r\n    }\r\n\r\n    removeMarkers(){\r\n\r\n    }\r\n\r\n    clearMarkers(){\r\n\r\n    }\r\n\r\n    getMarkers(){\r\n\r\n    }\r\n\r\n    getMarker(){\r\n\r\n    }\r\n\r\n    hasMarker(){\r\n\r\n    }\r\n\r\n    zoomToShowMarker(){\r\n\r\n    }\r\n\r\n    getVisibleParent(){\r\n\r\n    }\r\n}","export {MarkerClusterGroup} from './MarkerClusterGroup.js';\r\nexport {MarkerCluster} from './MarkerCluster.js';\r\nexport {LLBBox} from './LLBBox.js';\r\n"],"sourceRoot":""}